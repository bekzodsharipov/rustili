document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".hero__registerBtn"),t=document.getElementById("registrationModal"),n=document.getElementById("closeModalBtn"),l=document.querySelector(".homeModalOverlay"),o=document.getElementById("registrationForm"),i=document.getElementById("name"),a=document.getElementById("phone"),d=document.getElementById("nameError"),c=document.getElementById("phoneError"),r=document.getElementById("submitBtn"),s=document.getElementById("selectedCountry"),h=document.getElementById("selectedCountryCode"),m=document.getElementById("countryDropdown"),u=document.getElementById("dropdownIcon"),g=[{name:"Uzbekistan",code:"+998"},{name:"Qirgiziston",code:"+996"},{name:"Tojikiston",code:"+992"},{name:"Turkmaniston",code:"+993"},{name:"Qozogiston",code:"+7"},{name:"Rossiya",code:"+7"},{name:"Germaniya",code:"+49"},{name:"Turkiya",code:"+90"},{name:"Belarusiya",code:"+375"},{name:"Ukraina",code:"+380"},{name:"AQSH",code:"+1"},{name:"Janubiy Koreya",code:"+82"}],y={"+998":{placeholder:"88 888 88 88",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(7,e.length))),e.length>7&&(t+=" "+e.slice(7,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{2} \d{2}$/.test(e)}},"+996":{placeholder:"555 123 456",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(9,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{3}$/.test(e)}},"+992":{placeholder:"55 555 5555",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{4}$/.test(e)}},"+993":{placeholder:"6 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(1,e.length))),e.length>1&&(t+=" "+e.slice(1,Math.min(4,e.length))),e.length>4&&(t+=" "+e.slice(4,Math.min(8,e.length))),t},validate:function(e){return/^\d{1} \d{3} \d{4}$/.test(e)}},"+7":{placeholder:"700 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+49":{placeholder:"170 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+90":{placeholder:"532 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+375":{placeholder:"29 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{4}$/.test(e)}},"+380":{placeholder:"50 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{4}$/.test(e)}},"+1":{placeholder:"555 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+82":{placeholder:"10 1234 5678",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{2} \d{4} \d{4}$/.test(e)}}};let p="+998";function f(){m.innerHTML="",g.forEach((e=>{const t=document.createElement("div");t.className="country-option",e.code===p&&t.classList.add("selected"),t.innerHTML=`\n        <span>${e.name}</span>\n        <span class="country-code">${e.code}</span>\n        ${e.code===p?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>':""}\n      `,t.addEventListener("click",(function(){!function(e){p=e.code,h.textContent=e.code,m.style.display="none";const t=y[e.code]||y["+998"];a.placeholder=t.placeholder,a.value="",c.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'}(e)})),m.appendChild(t)}))}function M(){t.style.display="none",document.body.style.overflowY="scroll"}s.addEventListener("click",(function(){"block"===m.style.display?(m.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'):(f(),m.style.display="block",u.innerHTML='<polyline points="18 15 12 9 6 15"></polyline>')})),document.addEventListener("click",(function(e){s.contains(e.target)||m.contains(e.target)||(m.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>')})),a.addEventListener("input",(function(e){const t=function(e,t){const n=e.replace(/\D/g,"");return(y[t]||y["+998"]).format(n)}(e.target.value,p);a.value=t,c.style.display="none"})),i.addEventListener("input",(function(){d.style.display="none"})),e.forEach((e=>{e.addEventListener("click",(function(){t.style.display="block",document.body.style.overflowY="hidden"}))})),n.addEventListener("click",M),l.addEventListener("click",M),o.addEventListener("submit",(function(e){if(e.preventDefault(),!i.value.trim())return d.style.display="block",void(c.style.display="none");if(d.style.display="none",t=a.value,!(y[p]||y["+998"]).validate(t))return void(c.style.display="block");var t;c.style.display="none",r.textContent="YUBORILMOQDA...",r.disabled=!0;const n=new Date,l=n.toLocaleDateString("uz-UZ"),o=n.toLocaleTimeString("uz-UZ"),s={Ism:i.value,TelefonRaqam:`${p} ${a.value}`,SanaSoat:`${l} - ${o}`};localStorage.setItem("formData",JSON.stringify(s)),window.location.href="/thankYou.html",r.textContent="DAVOM ETISH",r.disabled=!1,i.value="",a.value="",M()}))}));let totalSeconds=120;const timerElement=document.getElementById("timer"),countdown=setInterval((()=>{if(totalSeconds<=0)return void clearInterval(countdown);totalSeconds--;let e=Math.floor(totalSeconds/3600),t=Math.floor(totalSeconds%3600/60),n=totalSeconds%60,l=e.toString().padStart(2,"0"),o=t.toString().padStart(2,"0"),i=n.toString().padStart(2,"0");timerElement.textContent=`${l}:${o}:${i}`}),1e3);